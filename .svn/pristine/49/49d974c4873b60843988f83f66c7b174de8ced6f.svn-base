/*!
 * 扩展easyui validatebox校验
 */
$.extend($.fn.validatebox.defaults.rules,{alpha:{validator:function(a,b){if(a){return/^[a-zA-Z\u00A1-\uFFFF]*$/.test(a)}else{return true}},message:"只能输入字母."},number:{validator:function(a,b){return/^\d+$/.test(a)},message:"请输入数字."},alphanum:{validator:function(a,b){if(a){return/^[a-zA-Z0-9]*$/.test(a)}else{return true}},message:"只能输入字母和数字."},positive_int:{validator:function(a,b){if(a){return/^[0-9]*[1-9][0-9]*$/.test(a)}else{return true}},message:"只能输入正整数."},numeric:{validator:function(a,b){if(a){return/^[0-9]*(\.[0-9]+)?$/.test(a)}else{return true}},message:"只能输入数字."},noNumeric:{validator:function(a,b){if(a){return !/^[0-9]*(\.[0-9]+)?$/.test(a)}else{return true}},message:"不能全为数字."},chinese:{validator:function(a,b){if(a){return/[^\u4E00-\u9FA5]/g.test(a)}else{return true}},message:"只能输入中文."},minLength:{validator:function(a,b){a=$.trim(a);return a.length>=b[0]},message:"请输入至少 {0}个非空字符 ."},CHS:{validator:function(a,b){return/^[\u0391-\uFFE5]+$/.test(a)},message:"请输入汉字."},ZIP:{validator:function(a,b){return/^[1-9]\d{5}$/.test(a)},message:"邮政编码不存在."},IP:{validator:function(a){return/\d+\.\d+\.\d+\.\d+/.test(a)},message:"IP地址格式不正确"},QQ:{validator:function(a,b){return/^[1-9]\d{4,10}$/.test(a)},message:"QQ号码不正确."},mobile:{validator:function(a,b){return/^(13|15|18)\d{9}$/i.test(a)},message:"以13、15、18开头的11位手机号码."},phone:{validator:function(a,b){return/^(\([0-9]{3,4}\)|[0-9]{3,4}\-)[0-9]{7,8}$/.test(a)},message:'电话号码输入有误，匹配格式：区号3位或4位，号码7位或8位，区号与电话号码之间用小括号或"-"隔开.例如:"0791-88888888"'},mobileOrPhone:{validator:function(a,b){return(/^(13|15|18)\d{9}$/i.test(a))||(/^(\([0-9]{3,4}\)|[0-9]{3,4}\-)[0-9]{7,8}$/.test(a))},message:'手机格式:以13、15、18开头的11位号码; 电话格式:区号3位或4位,号码7位或8位,区号与号码之间用小括号或"-"隔开.'},empty:{validator:function(a,b){return/^\S+$/gi.test(a)},message:"不允许有空格."},legalInput:{validator:function(a,b){return/^[\u0391-\uFFE5\w]+$/.test(a)},message:"只允许输入汉字、英文字母、数字及下划线."},safepass:{validator:function(a,b){return safePassword(a)},message:"密码由字母和数字组成，至少6位."},equalTo:{validator:function(a,b){return a==$(b[0]).val()},message:"两次输入的字符不一至."},idcard:{validator:function(a,b){return idCard(a)},message:"请输入正确的身份证号码."},comboboxRequired:{validator:function(d,e){var a=$(e[0]).combobox("getValue");if(""==a){return false}var c=$(e[0]).combobox("getData");if(c==null||c.length==0){return false}var b=0;while(b<c.length){if(a==c[b].value){return true}b++}if(b==c.length){return false}return true},message:"请选择..."},combotreeRequired:{validator:function(e,g){var b=$(g[0]).combotree("getValue");if(""==b){return false}var a=$(g[0]).combotree("tree");var f=undefined;if(a.tree("getRoot")!=undefined){f=a.tree("getRoot").target}var d=a.tree("getData",f);if(d==null||d.length==0){return false}var c=0;while(c<d.length){if(b==d[c].value){return true}c++}if(c==d.length){return false}return true},message:"请选择..."},combogridRequired:{validator:function(e,g){var a=$(g[0]).combogrid("getValue");if(""==a){return false}var c=$(g[0]).combogrid("grid");var f=undefined;var d=c.datagrid("getData").rows;if(d==null||d.length==0){return false}var b=0;while(b<d.length){if(a==d[b].id){return true}b++}if(b==d.length){return false}return true},message:"请选择..."}});var safePassword=function(a){return !(/^(([A-Z]*|[a-z]*|\d*|[-_\~!@#\$%\^&\*\.\(\)\[\]\{\}<>\?\\\/\'\"]*)|.{0,5})$|\s/.test(a))};var idCard=function(h){if(h.length==18&&18!=h.length){return false}var b=h.toLowerCase();var f,e=0,k="10x98765432",j=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],g="11,12,13,14,15,21,22,23,31,32,33,34,35,36,37,41,42,43,44,45,46,50,51,52,53,54,61,62,63,64,65,71,81,82,91";var l=b.match(/^(\d{2})\d{4}(((\d{2})(\d{2})(\d{2})(\d{3}))|((\d{4})(\d{2})(\d{2})(\d{3}[x\d])))$/);if(l==null||g.indexOf(l[1])<0){return false}if(l[2].length==9){b=b.substr(0,6)+"19"+b.substr(6);f=["19"+l[4],l[5],l[6]].join("-")}else{f=[l[9],l[10],l[11]].join("-")}if(!isDateTime.call(f,"yyyy-MM-dd")){return false}for(var c=0;c<17;c++){e+=b.charAt(c)*j[c]}return(l[2].length==9||b.charAt(17)==k.charAt(e%11))};var isDateTime=function(n,b){n=n||"yyyy-MM-dd";var m=this,a={},l=new Date();var h=n.split(/[^a-z]+/gi),f=m.split(/\D+/g),e=n.split(/[a-z]+/gi),c=m.split(/\d+/g);var k=h.length,g=e.length;if(k!=f.length||g!=c.length){return false}for(var j=0;j<g;j++){if(e[j]!=c[j]){return false}}for(var j=0;j<k;j++){a[h[j]]=f[j]}a.yyyy=p(a.yyyy,a.yy,l.getFullYear(),9999,4);a.MM=p(a.MM,a.M,l.getMonth()+1,12);a.dd=p(a.dd,a.d,l.getDate(),31);a.hh=p(a.hh,a.h,l.getHours(),24);a.mm=p(a.mm,a.m,l.getMinutes());a.ss=p(a.ss,a.s,l.getSeconds());a.ms=p(a.ms,a.ms,l.getMilliseconds(),999,3);if(a.yyyy+a.MM+a.dd+a.hh+a.mm+a.ss+a.ms<0){return false}if(a.yyyy<100){a.yyyy+=(a.yyyy>30?1900:2000)}l=new Date(a.yyyy,a.MM-1,a.dd,a.hh,a.mm,a.ss,a.ms);var q=l.getFullYear()==a.yyyy&&l.getMonth()+1==a.MM&&l.getDate()==a.dd&&l.getHours()==a.hh&&l.getMinutes()==a.mm&&l.getSeconds()==a.ss&&l.getMilliseconds()==a.ms;return q&&b?l:q;function p(t,s,r,o,d){o=o||60,d=d||2;var i=r;if(t!=undefined&&t!=""||!isNaN(t)){i=t*1}if(s!=undefined&&s!=""&&!isNaN(s)){i=s*1}return(i==t&&t.length!=d||i>o)?-10000:i}};