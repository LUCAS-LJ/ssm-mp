/*!
 * 包含easyui的扩展和常用的jQuery方法扩展.
 * @author 尔演&Eryan eryanwcp@gmail.com
 * @version 2013-05-26
 */
var eu=$.extend({},eu);eu.showMsg=function(a){$.messager.show({title:"提示信息！",msg:a,timeout:3000,showType:"slide"})};eu.showAlertMsg=function(b,a){$.messager.alert("提示信息！",b,a)};eu.showProMsg=function(b,a){$.messager.progress({title:"提示信息！",msg:b});setTimeout(function(){$.messager.progress("close")},a)};eu.showTopCenterMsg=function(a){$.messager.show({title:'<span style="color: red;">提示信息！</span>',msg:a,showType:"show",style:{right:"",top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""}})};eu.addTab=function(f,g,a,c,i,d,e){var h=true;if(undefined!=typeof c){h=c}if(typeof f=="string"){f=$("#"+f).tabs()}if(i=="undefined"){i=""}var b={tab:{title:g,closable:h,iconCls:i,cache:true,tools:d},iframe:{src:a,id:g},which:g};if(!f.tabs("exists",g)){f.tabs("addIframeTab",b)}else{f.tabs("select",g);if(e){f.tabs("updateIframeTab",b)}}};eu.datagridHeaderCenter=function(){$(".datagrid-header div").css("textAlign","center")};eu.panelCenter=function(){$(".panel-title").css("text-align","center")};eu.changeTheme=function(d){var f=$("#easyuiTheme");var b=f.attr("href");var a=b.substring(0,b.indexOf("themes"))+"themes/"+d+"/easyui.css";f.attr("href",a);var e=$("iframe");if(e.length>0){for(var c=0;c<e.length;c++){var g=e[c];$(g).contents().find("#easyuiTheme").attr("href",a)}}$.cookie("easyuiThemeName",d,{expires:7})};eu.unSelected=function(d,c,b){var a=$("#"+d).datagrid("getSelections");if(jQuery.inArray(b,a)!=-1){$("#"+d).datagrid("unselectRow",c)}else{$("#"+d).datagrid("selectRow",c)}};eu.destroyMessage=function(){$(".messager-body").window("destroy")};$.extend($.messager,{showBySite:function(b,d){var a=$.extend({left:"",top:"",right:0,bottom:-document.body.scrollTop-document.documentElement.scrollTop},d||{});var c=$("body > div .messager-body");if(c.length<=0){$.messager.show(b)}c=$("body > div .messager-body");c.window("window").css({left:a.left,top:a.top,right:a.right,zIndex:$.fn.window.defaults.zIndex++,bottom:a.bottom})}});$.extend($.fn.combo.methods,{disableTextbox:function(b,a){return b.each(function(){a=a||{};var d=$(this).combo("textbox");var f=this;var c=$(this).combo("panel");var g=$(this).data("combo");if(a.stopArrowFocus){g.stopArrowFocus=a.stopArrowFocus;var e=$.data(this,"combo").combo.find("span.combo-arrow");e.unbind("click.combo").bind("click.combo",function(){if(c.is(":visible")){$(f).combo("hidePanel")}else{$("div.combo-panel").panel("close");$(f).combo("showPanel")}});d.unbind("mousedown.mycombo").bind("mousedown.mycombo",function(h){h.preventDefault()})}d.prop(a.stoptype?a.stoptype:"disabled",true);g.stoptype=a.stoptype?a.stoptype:"disabled"})},enableTextbox:function(a){return a.each(function(){var c=$(this).combo("textbox");var f=$(this).data("combo");if(f.stopArrowFocus){var e=this;var b=$(this).combo("panel");var d=$.data(this,"combo").combo.find("span.combo-arrow");d.unbind("click.combo").bind("click.combo",function(){if(b.is(":visible")){$(e).combo("hidePanel")}else{$("div.combo-panel").panel("close");$(e).combo("showPanel")}c.focus()});c.unbind("mousedown.mycombo");f.stopArrowFocus=null}c.prop(f.stoptype,false);f.stoptype=null})}});$.extend($.fn.form.methods,{getData:function(e,d){var c=e.serializeArray();var b={};for(var a in c){if(typeof(b[c[a].name])=="undefined"){if(d){b[c[a].name]=(c[a].value=="true"||c[a].value=="false")?c[a].value=="true":c[a].value}else{b[c[a].name]=c[a].value}}else{if(d){b[c[a].name]=(c[a].value=="true"||c[a].value=="false")?c[a].value=="true":c[a].value}else{b[c[a].name]+=","+c[a].value}}}return b},disable:function(e,b){var d=e.attr("id");var a="disable";var c=true;if(!b){a="enable";c=false}$("form[id='"+d+"'] :text").attr("disabled",b);$("form[id='"+d+"'] textarea").attr("disabled",b);$("form[id='"+d+"'] select").attr("disabled",b);$("form[id='"+d+"'] :radio").attr("disabled",b);$("form[id='"+d+"'] :checkbox").attr("disabled",b);$("#"+d+" input[class='combobox-f combo-f']").each(function(){if(this.id){$("#"+this.id).combobox(a);$("#"+this.id).combobox("readonly",c)}});$("#"+d+" select[class='combobox-f combo-f']").each(function(){if(this.id){$("#"+this.id).combobox(a);$("#"+this.id).combobox("readonly",c)}});$("#"+d+" input[class='datebox-f combo-f']").each(function(){if(this.id){$("#"+this.id).datebox(a);$("#"+this.id).datebox("readonly",c)}})}});$.extend($.fn.tabs.methods,{loadTabIframe:function(b,a){return b.each(function(){var l=$(this).tabs("getTab",a.which);if(l==null){return}var j=l.panel("body");var c=$("iframe",j);if(c.length>0){c[0].contentWindow.document.write("");c[0].contentWindow.close();c.remove();if($.support.leadingWhitespace){try{CollectGarbage()}catch(k){}}}j.html("");j.css({overflow:"hidden",position:"relative"});var m=$('<div style="position:absolute;z-index:2;width:100%;height:100%;background:#ccc;z-index:1000;opacity:0.3;filter:alpha(opacity=30);"><div>').appendTo(j);var i=$('<div class="mask-message" style="z-index:3;width:auto;height:16px;line-height:16px;position:absolute;top:50%;left:50%;margin-top:-20px;margin-left:-92px;border:2px solid #d4d4d4;padding: 12px 5px 10px 30px;background: #ffffff url(\''+ctxStatic+"/js/easyui-1.4/themes/default/images/loading.gif') no-repeat scroll 5px center;\">"+(a.iframe.message||"页面加载中...")+"</div>").appendTo(j);var d=$('<div style="position:absolute;width:100%;height:100%;z-index:1;background:#fff;"></div>').appendTo(j);var h=$('<div style="position:absolute;width:100%;height:100%;z-index:0;"></div>').appendTo(j);var g=document.createElement("iframe");g.src=a.iframe.src;g.id=a.iframe.id;g.frameBorder=a.iframe.frameBorder||0;g.height=a.iframe.height||"100%";g.width=a.iframe.width||"100%";var f=function(){$([m[0],i[0]]).fadeOut(a.iframe.delay||"slow",function(){$(this).remove();if($(this).hasClass("mask-message")){d.fadeOut(a.iframe.delay||"slow",function(){$(this).remove()})}})};if(g.attachEvent){g.attachEvent("onload",f)}else{g.onload=f}h[0].appendChild(g)})},addIframeTab:function(b,a){return b.each(function(){if(a.tab.href){delete a.tab.href}$(this).tabs("add",a.tab);$(this).tabs("loadTabIframe",{which:a.tab.title,iframe:a.iframe})})},updateIframeTab:function(b,a){return b.each(function(){a.iframe=a.iframe||{};if(!a.iframe.src){var d=$(this).tabs("getTab",a.which);if(d==null){return}var c=d.panel("body");var e=c.find("iframe");if(e.length===0){return}$.extend(a.iframe,{src:e.attr("src")})}$(this).tabs("loadTabIframe",a)})},setTabTitle:function(b,a){return b.each(function(){var d=a.tab;var c=d.panel("options");var d=c.tab;c.title=a.title;var e=d.find("span.tabs-title");e.html(a.title)})}});$.fn.panel.defaults.loadingMessage="加载中....";$.fn.datagrid.defaults.loadMsg="加载中....";var removeEasyuiTipFunction=function(){window.setTimeout(function(){$("div.validatebox-tip").remove()},0)};$.fn.panel.defaults.onClose=removeEasyuiTipFunction;$.fn.window.defaults.onClose=removeEasyuiTipFunction;$.fn.dialog.defaults.onClose=removeEasyuiTipFunction;var createGridHeaderContextMenu=function(f,j){f.preventDefault();var a=$(this);var g=this.headerContextMenu;if(!g){var b=$('<div style="width:100px;"></div>').appendTo("body");var d=a.datagrid("getColumnFields");for(var c=0;c<d.length;c++){var k=a.datagrid("getColumnOption",d[c]);var h=k.title;var j=k.field;if(j=="ck"){h="全选"}if(!k.hidden){$('<div iconCls="easyui-icon-ok" field="'+d[c]+'"/>').html(h).appendTo(b)}else{$('<div iconCls="easyui--icon-empty" field="'+d[c]+'"/>').html(h).appendTo(b)}}g=this.headerContextMenu=b.menu({onClick:function(e){var i=$(e.target).attr("field");if(e.iconCls=="easyui-icon-ok"){if(d.length>1){a.datagrid("hideColumn",i);$(this).menu("setIcon",{target:e.target,iconCls:"easyui-icon-empty"})}}else{a.datagrid("showColumn",i);$(this).menu("setIcon",{target:e.target,iconCls:"easyui-icon-ok"})}}})}g.menu("show",{left:f.pageX,top:f.pageY})};$.fn.datagrid.defaults.onHeaderContextMenu=createGridHeaderContextMenu;$.fn.treegrid.defaults.onHeaderContextMenu=createGridHeaderContextMenu;var easyuiPanelOnMove=function(b,f){var c=b;var j=f;if(c<1){c=1}if(j<1){j=1}var a=parseInt($(this).parent().css("width"))+14;var h=parseInt($(this).parent().css("height"))+14;var g=c+a;var e=j+h;var i=$(document).width();var d=$(document).height();if(g>i){c=i-a}if(e>d){j=d-h}$(this).parent().css({left:c,top:j})};$.fn.dialog.defaults.onMove=easyuiPanelOnMove;$.fn.window.defaults.onMove=easyuiPanelOnMove;$.fn.panel.defaults.onMove=easyuiPanelOnMove;$.fn.panel.defaults.onBeforeDestroy=function(){var b=$("iframe",this);try{if(b.length>0){b[0].contentWindow.document.write("");b[0].contentWindow.close();b.remove();if($.support.leadingWhitespace){try{CollectGarbage()}catch(a){}}}}catch(a){}};$.extend($.fn.datagrid.methods,{addEditor:function(c,b){if(b instanceof Array){$.each(b,function(d,f){var g=$(c).datagrid("getColumnOption",f.field);g.editor=f.editor})}else{var a=$(c).datagrid("getColumnOption",b.field);a.editor=b.editor}},removeEditor:function(c,b){if(b instanceof Array){$.each(b,function(d,f){var g=$(c).datagrid("getColumnOption",f);g.editor={}})}else{var a=$(c).datagrid("getColumnOption",b);a.editor={}}},setColumnTitle:function(b,a){if(a.field){return b.each(function(){var e=$(this).datagrid("getPanel");var d=$("td[field="+a.field+"]",e);if(d.length){var c=$("span",d).eq(0);c.html(a.text)}})}return b},columnMoving:function(a){return a.each(function(){var d=this;var c=$(this).datagrid("getPanel").find("div.datagrid-header td[field]");c.draggable({revert:true,cursor:"pointer",edge:5,proxy:function(e){var f=$('<div class="tree-node-proxy tree-dnd-no" style="position:absolute;border:1px solid #ff0000"/>').appendTo("body");f.html($(e).text());f.hide();return f},onBeforeDrag:function(f){f.data.startLeft=$(this).offset().left;f.data.startTop=$(this).offset().top},onStartDrag:function(){$(this).draggable("proxy").css({left:-10000,top:-10000})},onDrag:function(f){$(this).draggable("proxy").show().css({left:f.pageX+15,top:f.pageY+15});return false}}).droppable({accept:"td[field]",onDragOver:function(g,f){$(f).draggable("proxy").removeClass("tree-dnd-no").addClass("tree-dnd-yes");$(this).css("border-left","1px solid #ff0000")},onDragLeave:function(g,f){$(f).draggable("proxy").removeClass("tree-dnd-yes").addClass("tree-dnd-no");$(this).css("border-left",0)},onDrop:function(h,g){$(this).css("border-left",0);var i=$(g).attr("field");var f=$(this).attr("field");setTimeout(function(){b(i,f);$(d).datagrid();$(d).datagrid("columnMoving")},0)}});function b(k,j){var g=$(d).datagrid("options").columns;var i=g[0];var h=f(k);if(h){e(j,h)}$(d).datagrid("reload");function f(m){for(var l=0;l<i.length;l++){if(i[l].field==m){var n=i[l];i.splice(l,1);return n}}return null}function e(n,o){var l=[];for(var m=0;m<i.length;m++){if(i[m].field==n){l.push(o)}l.push(i[m])}g[0]=l}}})},fixRownumber:function(a){return a.each(function(){var b=$(this).datagrid("getPanel");var d=$(".datagrid-cell-rownumber",b).last().clone();d.css({position:"absolute",left:-1000}).appendTo("body");var c=d.width("auto").width();if(c>25){$(".datagrid-header-rownumber,.datagrid-cell-rownumber",b).width(c+5);$(this).datagrid("resize");d.remove();d=null}else{$(".datagrid-header-rownumber,.datagrid-cell-rownumber",b).removeAttr("style")}})},keyCtr:function(a){return a.each(function(){var b=$(this);b.datagrid("getPanel").panel("panel").attr("tabindex",1).bind("keydown",function(g){switch(g.keyCode){case 38:var d=b.datagrid("getSelected");if(d){var c=b.datagrid("getRowIndex",d);b.datagrid("selectRow",c-1)}else{var f=b.datagrid("getRows");b.datagrid("selectRow",f.length-1)}break;case 40:var d=b.datagrid("getSelected");if(d){var c=b.datagrid("getRowIndex",d);b.datagrid("selectRow",c+1)}else{b.datagrid("selectRow",0)}break}})})}});var gridautoMergeCellsOptions={autoMergeCells:function(b,a){return b.each(function(){var g=$(this);if(!a){a=g.datagrid("getColumnFields")}var m=g.datagrid("getRows");var e=0,d=0,k={};for(e;e<m.length;e++){var l=m[e];d=0;for(d;d<a.length;d++){var h=a[d];var c=k[h];if(!c){c=k[h]={};c[l[h]]=[e]}else{var f=c[l[h]];if(f){f.push(e)}else{f=c[l[h]]=[e]}}}}$.each(k,function(j,i){$.each(i,function(){var q=this;if(q.length>1){var o,s,r=q[0];for(var n=0;n<q.length;n++){o=q[n];s=q[n+1];if(s&&(s-o)==1){continue}var p=o-r+1;if(p>1){g.datagrid("mergeCells",{index:r,field:j,rowspan:p})}if(s&&(s-o)!=1){r=s}}}})})})}};var gridTooltipOptions={showTooltip:function(e,d){if(!d){d={}}var b={onlyShowNowrap:true};d=$.extend(d,b);function a(g,j,i,h){if($(j).text()==""){return}var f=h.data("datagrid");g.content='<div class="tipcontent">'+g.content+"</div>";$(j).tooltip({content:g.content,trackMouse:true,position:d.position,onHide:function(){$(this).tooltip("destroy")},onUpdate:function(l){var k=$(this).tooltip("tip");if(parseInt(k.css("width"))>500){k.css("width",500)}},onShow:function(){var k=$(this).tooltip("tip");if(g.tipStyler){k.css(g.tipStyler)}if(g.contentStyler){k.find("div.tipcontent").css(g.contentStyler)}if(g.attachToMouse){fixPosition(k,d.position,f)}}}).tooltip("show")}function c(h,i,g){var f=g.data("datagrid");$(h).undelegate(i,"mouseover").undelegate(i,"mouseout").undelegate(i,"mousemove").delegate(i,{mouseover:function(k){if($(this).attr("field")===undefined){return}f.factContent=$(this).find(">div").clone().css({"margin-left":"-5000px",width:"auto",display:"inline",position:"absolute"}).appendTo("body");var j=f.factContent.width();d.content=$(this).find(">div").clone().css({width:"auto"}).html();if(d.onlyShowNowrap&&d.fields===undefined){if(j>$(this).width()){a(d,this,k,g)}}else{a(d,this,k,g)}},mouseout:function(j){if(f.factContent){f.factContent.remove();f.factContent=null}}})}return e.each(function(){var h=$(this);var g=$(this).data("datagrid");if(!g.tooltip){var f=h.datagrid("getPanel").panel("panel");f.find(".datagrid-body").each(function(){var i=$(this).find("> div.datagrid-body-inner").length?$(this).find("> div.datagrid-body-inner")[0]:this;if(d.fields&&typeof d.fields=="object"){$.each(d.fields,function(){var j=this;c(i,"td[field="+j+"]",h)})}else{c(i,"td",h)}})}})},closeTooltip:function(a){return a.each(function(){var c=$(this).data("datagrid");if(c.factContent){c.factContent.remove();c.factContent=null}var b=$(this).datagrid("getPanel").panel("panel");b.find(".datagrid-body").undelegate("td","mouseover").undelegate("td","mouseout").undelegate("td","mousemove")})}};$.extend($.fn.datagrid.methods,gridTooltipOptions,gridautoMergeCellsOptions);$.extend($.fn.treegrid.methods,gridTooltipOptions);$.extend($.fn.tree.methods,{getCheckedExt:function(c){var a=$(c).tree("getChecked");var b=$(c).find("span.tree-checkbox2").parent();$.each(b,function(){var d=$.extend({},$.data(this,"tree-node"),{target:this});a.push(d)});return a},getSolidExt:function(c){var a=[];var b=$(c).find("span.tree-checkbox2").parent();$.each(b,function(){var d=$.extend({},$.data(this,"tree-node"),{target:this});a.push(d)});return a},getLevel:function(c,b){var a=$(b).parentsUntil("ul.tree","ul");return a.length+1},setQueryParams:function(b,a){return b.each(function(){$(this).tree("options").queryParams=a})},unSelect:function(b,a){return b.each(function(){$(a).removeClass("tree-node-selected")})}});eu.myCascadeCheck=function(b,e){if(b=="undefined"||e=="undefined"){return}if(e.checked){e.checked=false;b.tree("uncheck",e.target)}else{e.checked=true;b.tree("check",e.target)}var f;f=e;while(f){var a=b.tree("getParent",f.target);f=a;if(f){b.tree("check",f.target)}}f=e;if(f){var g=b.tree("getChildren",f.target);var d;for(var c=0;c<=g.length;c++){d=g[c];if(d){if(f.checked){b.tree("check",d.target)}else{b.tree("uncheck",d.target)}}}}};$.fn.tree.defaults.loadFilter=function(e,h){var b=$(this).data().tree.options;var a,c,g;if(b.parentField){a=b.idFiled||"id";c=b.textFiled||"text";g=b.parentField;var f,d,j=[],k=[];for(f=0,d=e.length;f<d;f++){k[e[f][a]]=e[f]}for(f=0,d=e.length;f<d;f++){if(k[e[f][g]]&&e[f][a]!=e[f][g]){if(!k[e[f][g]]["children"]){k[e[f][g]]["children"]=[]}e[f]["text"]=e[f][c];k[e[f][g]]["children"].push(e[f])}else{e[f]["text"]=e[f][c];j.push(e[f])}}return j}return e};$.fn.treegrid.defaults.loadFilter=function(e,g){var b=$(this).data().treegrid.options;var a,c,h;if(b.parentField){a=b.idFiled||"id";c=b.textFiled||"text";h=b.parentField;var f,d,j=[],k=[];for(f=0,d=e.length;f<d;f++){k[e[f][a]]=e[f]}for(f=0,d=e.length;f<d;f++){if(k[e[f][h]]&&e[f][a]!=e[f][h]){if(!k[e[f][h]]["children"]){k[e[f][h]]["children"]=[]}e[f]["text"]=e[f][c];k[e[f][h]]["children"].push(e[f])}else{e[f]["text"]=e[f][c];j.push(e[f])}}return j}return e};$.fn.combotree.defaults.loadFilter=$.fn.tree.defaults.loadFilter;$.modalDialog=function(a){var b=$.extend({title:"",width:840,height:680,modal:true,onClose:function(){$(this).dialog("destroy")}},a);b.modal=true;return $.modalDialog.handler=$("<div/>").dialog(b)};$.extend($.fn.dialog.methods,{mymove:function(b,a){return b.each(function(){$(this).dialog("move",a)})}});$.extend($.fn.datagrid.defaults.editors,{combogrid:{init:function(a,c){var b=$('<input type="text" class="datagrid-editable-input">').appendTo(a);b.combogrid(c);return b},destroy:function(a){$(a).combogrid("destroy")},getValue:function(a){return $(a).combogrid("getValue")},setValue:function(b,a){$(b).combogrid("setValue",a)},resize:function(b,a){$(b).combogrid("resize",a)}},combocheckboxtree:{init:function(a,b){var c=$("<input />").appendTo(a);b.multiple=true;c.combotree(b);return c},destroy:function(a){$(a).combotree("destroy")},getValue:function(a){return $(a).combotree("getValues").join(",")},setValue:function(b,a){$(b).combotree("setValues",$.getList(a))},resize:function(b,a){$(b).combotree("resize",a)}},datebox:{init:function(a,b){var c=$('<input type="text">').appendTo(a);c.datebox(b);return c},destroy:function(a){$(a).datebox("destroy")},getValue:function(a){return $(a).datebox("getValue")},setValue:function(b,a){$(b).datebox("setValue",a)},resize:function(b,a){$(b).datebox("resize",a)}},datetimebox:{init:function(a,b){var c=$("<input />").appendTo(a);c.datetimebox(b);return c},destroy:function(a){$(a).datetimebox("destroy")},getValue:function(a){return $(a).datetimebox("getValue")},setValue:function(b,a){$(b).datetimebox("setValue",a)},resize:function(b,a){$(b).datetimebox("resize",a)}},my97:{init:function(a,b){var c=$("<input />").appendTo(a);c.my97(b);return c},getValue:function(a){return $(a).val()},setValue:function(b,a){$(b).val(a)},setDisabled:function(b,a){$(b).my97("setDisabled",a)}},multiplecombobox:{init:function(a,b){var c=$("<input />").appendTo(a);b.multiple=true;c.combobox(b);return c},destroy:function(a){$(a).combobox("destroy")},getValue:function(a){return $(a).combobox("getValues").join(",")},setValue:function(b,a){$(b).combobox("setValues",$.getList(a))},resize:function(b,a){$(b).combobox("resize",a)}},numberspinner:{init:function(a,c){var b=$('<input type="text">').appendTo(a);return b.numberspinner(c)},destroy:function(a){$(a).numberspinner("destroy")},getValue:function(a){return $(a).numberspinner("getValue")},setValue:function(b,a){$(b).numberspinner("setValue",a)},resize:function(b,a){$(b).numberspinner("resize",a)}},timespinner:{init:function(a,c){var b=$("<input/>").appendTo(a);b.timespinner(c);return b},getValue:function(a){var b=$(a).timespinner("getValue")},setValue:function(b,a){$(b).timespinner("setValue",a)},resize:function(c,b){var a=$(c);if($.boxModel==true){a.resize("resize",b-(a.outerWidth()-a.width()))}else{a.resize("resize",b)}}},password:{init:function(a,c){var b=$('<input class="datagrid-editable-input" type="password"/>').appendTo(a);if(!$.fn.validatebox.defaults.rules.safepass){$.extend($.fn.validatebox.defaults.rules,{safepass:{validator:function(d,e){return !(/^(([A-Z]*|[a-z]*|\d*|[-_\~!@#\$%\^&\*\.\(\)\[\]\{\}<>\?\\\/\'\"]*)|.{0,5})$|\s/.test(d))},message:"密码由字母和数字组成，至少6位"}})}b.validatebox(c);return b},getValue:function(a){alert($(a).val());alert(a.value);return $(a).val()},setValue:function(b,a){$(b).val(a)},resize:function(c,b){var a=$(c);if($.boxModel==true){a.width(b-(a.outerWidth()-a.width()))}else{a.width(b)}}}});$.extend($.fn.datagrid.defaults.view,{render:function(j,e,a){var d=$.data(j,"datagrid");var b=d.options;var n=d.data.rows;var h=$(j).datagrid("getColumnFields",a);if(a){if(!(b.rownumbers||(b.frozenColumns&&b.frozenColumns.length))){return}}var l=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'];for(var g=0;g<n.length;g++){var k=(g%2&&b.striped)?'class="datagrid-row datagrid-row-alt"':'class="datagrid-row"';var m=b.rowStyler?b.rowStyler.call(j,g,n[g]):"";var c=m?'style="'+m+'"':"";var f=d.rowIdPrefix+"-"+(a?1:2)+"-"+g;l.push('<tr id="'+f+'" datagrid-row-index="'+g+'" '+k+" "+c+">");l.push(this.renderRow.call(this,j,h,a,g,n[g]));l.push("</tr>")}l.push("</tbody></table>");$(e).html(l.join(""));$.parser.parse(e)},renderRow:function(target,fields,frozen,rowIndex,rowData){var opts=$.data(target,"datagrid").options;var cc=[];if(frozen&&opts.rownumbers){var rownumber=rowIndex+1;if(opts.pagination){rownumber+=(opts.pageNumber-1)*opts.pageSize}cc.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+rownumber+"</div></td>")}for(var i=0;i<fields.length;i++){var field=fields[i];var col=$(target).datagrid("getColumnOption",field);if(col){var value=jQuery.proxy(function(){try{return eval("this."+field)}catch(e){return""}},rowData)();var styleValue=col.styler?(col.styler(value,rowData,rowIndex)||""):"";var style=col.hidden?'style="display:none;'+styleValue+'"':(styleValue?'style="'+styleValue+'"':"");cc.push('<td field="'+field+'" '+style+">");if(col.checkbox){var style=""}else{var style=styleValue;if(col.align){style+=";text-align:"+col.align+";"}if(!opts.nowrap){style+=";white-space:normal;height:auto;"}else{if(opts.autoRowHeight){style+=";height:auto;"}}}cc.push('<div style="'+style+'" ');if(col.checkbox){cc.push('class="datagrid-cell-check ')}else{cc.push('class="datagrid-cell '+col.cellClass)}cc.push('">');if(col.checkbox){cc.push('<input type="checkbox" name="'+field+'" value="'+(value!=undefined?value:"")+'"/>')}else{if(col.formatter){cc.push(col.formatter(value,rowData,rowIndex))}else{cc.push(value)}}cc.push("</div>");cc.push("</td>")}}return cc.join("")}});$.fn.datebox.defaults.formatter=function(a){var b=new Date(a);return $.formatDate(b,"yyyy-MM-dd")};$.fn.datebox.defaults.parser=function(c){if(!c){return new Date()}var b=c.split("-");var f=parseInt(b[0],10);var a=parseInt(b[1],10);var e=parseInt(b[2],10);if(!isNaN(f)&&!isNaN(a)&&!isNaN(e)){return new Date(f,a-1,e)}else{return new Date()}};$.fn.datetimebox.defaults.formatter=function(a){return $.formatDate(a,"yyyy-MM-dd HH:mm:ss")};$.fn.datetimebox.defaults.parser=function(e){if(!e){return new Date()}var c=e.split(" ")[0].split("-");var i=parseInt(c[0],10);var h=parseInt(c[1],10);var g=parseInt(c[2],10);var f=e.split(" ")[1].split(":");var b=parseInt(f[0],10);var a=parseInt(f[1],10);var e=parseInt(f[2],10);if(!isNaN(i)&&!isNaN(h)&&!isNaN(g)){return new Date(i,h-1,g,b,a,e)}else{return new Date()}};var easyuiErrorFunction=function(a){$.messager.progress("close");var b=a.responseText;if(!b){eu.showAlertMsg("服务器无响应.","error")}else{eu.showAlertMsg(b,"error")}};$.fn.datagrid.defaults.onLoadError=easyuiErrorFunction;$.fn.treegrid.defaults.onLoadError=easyuiErrorFunction;$.fn.tree.defaults.onLoadError=easyuiErrorFunction;$.fn.combogrid.defaults.onLoadError=easyuiErrorFunction;$.fn.combobox.defaults.onLoadError=easyuiErrorFunction;$.fn.form.defaults.onLoadError=easyuiErrorFunction;$.extend($.fn.layout.methods,{removeHeader:function(b,a){return b.each(function(){var c=$(this).layout("panel",a);if(c){c.panel("removeHeader");c.panel("resize")}})},addHeader:function(b,a){return b.each(function(){var c=$(this).layout("panel",a.region);var d=c.panel("options");if(c){var e=a.title?a.title:d.title;c.panel("addHeader",{title:e});c.panel("resize")}})},isVisible:function(d,c){var b=$.data(d[0],"layout").panels;var a=b[c];if(!a){return false}if(a.length){return a.panel("panel").is(":visible")}else{return false}},hidden:function(b,a){return b.each(function(){var e=$.data(this,"layout").options;var c=$.data(this,"layout").panels;if(!e.regionState){e.regionState={}}var f=a;function d(l,j,g){var k=j.substring(0,1);var i=j.substring(1);var h="expand"+k.toUpperCase()+i;if(c[h]){if($(l).layout("isVisible",h)){e.regionState[j]=1;c[h].panel("close")}else{if($(l).layout("isVisible",j)){e.regionState[j]=0;c[j].panel("close")}}}else{c[j].panel("close")}if(g){$(l).layout("resize")}}if(f.toLowerCase()=="all"){d(this,"east",false);d(this,"north",false);d(this,"west",false);d(this,"south",true)}else{d(this,f,true)}})},show:function(b,a){return b.each(function(){var e=$.data(this,"layout").options;var d=$.data(this,"layout").panels;var f=a;function c(l,j,g){var k=j.substring(0,1);var i=j.substring(1);var h="expand"+k.toUpperCase()+i;if(d[h]){if(!$(l).layout("isVisible",h)){if(!$(l).layout("isVisible",j)){if(e.regionState[j]==1){d[h].panel("open")}else{d[j].panel("open")}}}}else{d[j].panel("open")}if(g){$(l).layout("resize")}}if(f.toLowerCase()=="all"){c(this,"east",false);c(this,"north",false);c(this,"west",false);c(this,"south",true)}else{c(this,f,true)}})},setRegionSize:function(b,a){return b.each(function(){if(a.region=="center"){return}var c=$(this).layout("panel",a.region);var d=c.panel("options");if(a.region=="north"||a.region=="south"){d.height=a.value}else{d.width=a.value}$(this).layout("resize")})},setHeaderIcon:function(b,a){return b.each(function(){if(a.region=="center"){return}var c=$(this).layout("panel",a.region);var e=c.panel("header").find(">div.panel-title");var d=c.panel("header").find(">div.panel-icon");if(d.length===0){if(e.length&&a.iconCls!=null){$('<div class="panel-icon '+a.iconCls+'"></div>').insertBefore(e);e.addClass("panel-with-icon")}}else{if(a.iconCls==null){d.remove();e.removeClass("panel-with-icon")}else{d.attr("class","").addClass("panel-icon "+a.iconCls)}}})},setSplitActivateState:function(b,a){return b.each(function(){if(a.region=="center"){return}$(this).layout("panel",a.region).panel("panel").resizable(a.disabled?"disable":"enable")})},setSplitVisiableState:function(b,a){return b.each(function(){if(a.region=="center"){return}var c=$(this).layout("panel",a.region);c.panel("options").split=a.visible;if(a.visible){c.panel("panel").addClass("layout-split-north")}else{c.panel("panel").removeClass("layout-split-north")}$(this).layout("resize")})},setRegionToolVisableState:function(b,a){return b.each(function(){if(a.region=="center"){return}var e=$.data(this,"layout").panels;var c=e[a.region];var d=c.panel("header").find(">div.panel-tool");d.css({display:a.visible?"block":"none"});var h=a.region.substring(0,1);var g=a.region.substring(1);var f="expand"+h.toUpperCase()+g;if(e[f]){e[f].panel("header").find(">div.panel-tool").css({display:a.visible?"block":"none"})}})},fullCenter:function(a){return a.each(function(){var c=$(this);var b=c.layout("panel","center");b.panel("maximize");b.parent().css("z-index",10);$(window).on("resize.full",function(){c.layout("unFullCenter").layout("resize")})})},unFullCenter:function(a){return a.each(function(){var b=$(this).layout("panel","center");b.parent().css("z-index","inherit");b.panel("restore");$(window).off("resize.full")})}});$.extend($.fn.window.methods,{shake:function(b,a){return b.each(function(){var f=a&&a.extent?a.extent:1;var d=a&&a.interval?a.interval:13;var e=$(this).closest("div.window")[0].style;if($(this).data("window").shadow){var c=$(this).data("window").shadow[0].style}_p=[4*f,6*f,8*f,6*f,4*f,0,-4*f,-6*f,-8*f,-6*f,-4*f,0],_fx=function(){e.marginLeft=_p.shift()+"px";if(c){c.marginTop=0}if(_p.length<=0){e.marginLeft=0;if(c){c.marginLeft=0}clearInterval(_timerId);_timerId=null,_p=null,_fx=null}};_p=_p.concat(_p.concat(_p));_timerId=setInterval(_fx,d)})}});$.extend($.fn.menu.methods,{showItem:function(b,a){return b.each(function(){var c=$(this).menu("findItem",a);$(c.target).show()})},hideItem:function(b,a){return b.each(function(){var c=$(this).menu("findItem",a);$(c.target).hide()})}});$.extend($.fn.dialog.methods,{addButtonsItem:function(jq,items){return jq.each(function(){var buttonbar=$(this).children("div.dialog-button");for(var i=0;i<items.length;i++){var item=items[i];var btn=$('<a href="javascript:void(0)"></a>');btn[0].onclick=eval(item.handler||function(){});btn.css("float","left").appendTo(buttonbar).linkbutton($.extend({},item,{plain:false}))}buttonbar=null})},removeButtonsItem:function(b,a){return b.each(function(){var f=$(this).children("div.dialog-button").children("a");var c=null;if(typeof a=="number"){c=f.eq(a)}else{if(typeof a=="string"){var g=null;f.each(function(){g=$(this).data().linkbutton.options.text;if(g==a){c=$(this);g=null;return}})}}if(c){var e=c.prev()[0];var d=c.next()[0];if(e&&d&&e.nodeName=="DIV"&&e.nodeName==d.nodeName){$(e).remove()}else{if(d&&d.nodeName=="DIV"){$(d).remove()}else{if(e&&e.nodeName=="DIV"){$(e).remove()}}}c.remove();c=null}})}});$.ajaxSetup({type:"POST",error:function(a,c,b){$.messager.progress("close");if(!data){eu.showAlertMsg("服务器无响应.","error")}else{if(data.msg){eu.showAlertMsg(data.msg,"error")}else{eu.showAlertMsg(data,"error")}}}});